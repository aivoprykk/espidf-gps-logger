(self.webpackChunkesp_gps_frontend=self.webpackChunkesp_gps_frontend||[]).push([[792],{32511:function(e,t,n){"use strict";var l=n(53751),a=n(20641),i=n(90033),o=n(32531),u=n(8490),r=n(59153),s=n(74738),c=n(52939),d=n(91867),f=n(98627),m=n(76341),g=n(26318),p=n(13644),h=n(90483),k=n(21923),b=n(83971),v={key:0},F={key:1},_=n(89379),y=(n(74423),n(21699),n(40834)),w=n(71083).A.create({baseURL:"http://esp-logger.local/api/v1",headers:{"Content-type":"application/json"},withCredentials:!1}),C={name:"App",data:function(){return{username:this.$route.params.username,appTitle:"ESP-Logger",drawer:!1,items:[{title:"Home",to:"/",icon:"home"},{title:"Files",to:"/files",icon:"folder"},{title:"Config",to:"/config",icon:"cog-outline"},{title:"Firmware",to:"/fwupdate",icon:"wrench-cog-outline"},{title:"Login",to:"/login",icon:"login"}]}},methods:{requestReatart:function(){return w.get("/system/restart")}},computed:(0,_.A)({},(0,y.L8)(["isLoggedIn"])),mounted:function(){window.location.origin.includes("esp-logger")&&(w.defaults.baseURL=window.location.origin+"/api/v1")}},A=n(85072),L=n.n(A),x=n(97825),V=n.n(x),T=n(77659),W=n.n(T),U=n(55056),E=n.n(U),P=n(10540),B=n.n(P),D=n(41113),X=n.n(D),R=n(80683),S=n.n(R),I={};I.styleTagTransform=X(),I.setAttributes=E(),I.insert=W().bind(null,"head"),I.domAPI=V(),I.insertStyleElement=B(),L()(S(),I),S()&&S().locals&&S().locals;var $=n(66262),z=(0,$.A)(C,[["render",function(e,t,n,_,y,w){var C=(0,a.g2)("router-view");return(0,a.uX)(),(0,a.Wv)(o.E,{class:"myFont"},{default:(0,a.k6)((function(){return[(0,a.bF)(f.L,null,{default:(0,a.k6)((function(){return[(0,a.bF)(u.z,{app:"",color:"primary",prominent:""},{default:(0,a.k6)((function(){return[(0,a.bF)(r.Z,{class:"hidden-md-and-up",onClick:t[0]||(t[0]=(0,l.D$)((function(e){return y.drawer=!y.drawer}),["stop"]))}),(0,a.bF)(b.s,null,{default:(0,a.k6)((function(){return[(0,a.bF)(s.D,{flat:"",to:"/"},{default:(0,a.k6)((function(){return[(0,a.eW)((0,i.v_)(y.appTitle),1)]})),_:1})]})),_:1}),(0,a.bF)(c.h),y.username?(0,a.Q3)("v-if",!0):((0,a.uX)(),(0,a.CE)("span",v,[(0,a.bF)(s.D,{flat:"",class:"hidden-sm-and-down",to:"/files"},{default:(0,a.k6)((function(){return[(0,a.eW)("Files")]})),_:1}),(0,a.bF)(s.D,{flat:"",class:"hidden-sm-and-down",to:"/config"},{default:(0,a.k6)((function(){return[(0,a.eW)("Config")]})),_:1}),(0,a.bF)(s.D,{flat:"",class:"hidden-sm-and-down",to:"/fwupdate"},{default:(0,a.k6)((function(){return[(0,a.eW)("Firmware")]})),_:1}),(0,a.bF)(s.D,{flat:"",class:"hidden-sm-and-down",to:"/login"},{default:(0,a.k6)((function(){return[(0,a.eW)("Login")]})),_:1}),(0,a.bF)(s.D,{flat:"",class:"hidden-sm-and-down",onClick:w.requestReatart},{default:(0,a.k6)((function(){return[(0,a.eW)("Restart")]})),_:1},8,["onClick"])])),e.isLoggedIn?((0,a.uX)(),(0,a.CE)("span",F,[(0,a.bF)(s.D,{flat:"",class:"hidden-sm-and-down"},{default:(0,a.k6)((function(){return[(0,a.eW)("Logout")]})),_:1})])):(0,a.Q3)("v-if",!0)]})),_:1}),(0,a.bF)(k.e,{app:"",color:"primary",modelValue:y.drawer,"onUpdate:modelValue":t[1]||(t[1]=function(e){return y.drawer=e}),temporary:"",height:"100vh",class:"px-3 py-3"},{default:(0,a.k6)((function(){return[(0,a.bF)(m.x8,null,{default:(0,a.k6)((function(){return[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(y.items,(function(e,t){return(0,a.uX)(),(0,a.Wv)(g.g,{key:t,value:e.title,to:e.to},{prepend:(0,a.k6)((function(){return[(0,a.bF)(d.w,{icon:e.icon},null,8,["icon"])]})),default:(0,a.k6)((function(){return[(0,a.bF)(p.U,null,{default:(0,a.k6)((function(){return[(0,a.eW)((0,i.v_)(e.title),1)]})),_:2},1024)]})),_:2},1032,["value","to"])})),128))]})),_:1})]})),_:1},8,["modelValue"]),(0,a.bF)(h.Y,null,{default:(0,a.k6)((function(){return[(0,a.bF)(C)]})),_:1})]})),_:1})]})),_:1})}]]),K=n(75220),j=n(65455),Q=n(99311),J=n(94492),M=n(4261),N=n(91743),H=n(7127),O={class:"ma-auto",density:"compact"},G=(0,a.Lk)("span",{class:"grey--text"},"ESP Version:",-1),q=(0,a.Lk)("span",{class:"grey--text"},"ESP cores:",-1),Y=(0,a.Lk)("span",{class:"grey--text"},"SW Version:",-1),Z=(0,a.Lk)("span",{class:"grey--text"},"Hostname:",-1),ee=(0,a.Lk)("span",{class:"grey--text"},"AP SSID:",-1),te=(0,a.Lk)("span",{class:"grey--text"},"AP IP:",-1),ne=(0,a.Lk)("span",{class:"grey--text"},"STA SSID:",-1),le=(0,a.Lk)("span",{class:"grey--text"},"STA IP:",-1),ae=n(82284),ie={data:function(){return{version:null,cores:null,fwver:null,hostname:null,ap_ssid:null,ap_ip:null,sta_ssid:null,sta_ip:null}},mounted:function(){var e=this;window.location.origin.includes("esp-logger")&&(w.defaults.baseURL=window.location.origin+"/api/v1"),w.get("/system/info").then((function(t){var n=t.data;n&&n.data&&"object"==(0,ae.A)(n.data)&&(n=n.data),e.version=n?n.version:"",e.cores=n?n.cores:"",e.fwver=n?n.fwversion:"",e.hostname=n?n.hostname:"",e.ap_ssid=n?n.ap_ssid:"",e.ap_ip=n?n.ap_address:"",e.sta_ssid=n?n.sta_ssid:"",e.sta_ip=n?n.sta_address:""})).catch((function(e){console.log(e)}))}},oe=(0,$.A)(ie,[["render",function(e,t,l,o,u,r){return(0,a.uX)(),(0,a.Wv)(J.I,null,{default:(0,a.k6)((function(){return[(0,a.bF)(M.L,{align:"center",justify:"center",style:{height:"100vh"},dense:""},{default:(0,a.k6)((function(){return[(0,a.bF)(N.B,{cols:"12",sm:"6","offset-sm":"3",class:"grey lighten-2 fill-height d-flex flex-column justify-center align-center"},{default:(0,a.k6)((function(){return[(0,a.bF)(j.J,{tile:""},{default:(0,a.k6)((function(){return[(0,a.bF)(H.y,{src:n(69290),contain:"",height:"200"},null,8,["src"]),(0,a.bF)(Q.r,{"primary-title":""},{default:(0,a.k6)((function(){return[(0,a.Lk)("div",O,[(0,a.bF)(M.L,{dense:""},{default:(0,a.k6)((function(){return[(0,a.bF)(N.B,{cols:"6"},{default:(0,a.k6)((function(){return[G]})),_:1}),(0,a.eW)(),(0,a.bF)(N.B,null,{default:(0,a.k6)((function(){return[(0,a.eW)((0,i.v_)(u.version),1)]})),_:1})]})),_:1}),(0,a.bF)(M.L,{dense:""},{default:(0,a.k6)((function(){return[(0,a.bF)(N.B,{cols:"6"},{default:(0,a.k6)((function(){return[q]})),_:1}),(0,a.eW)(),(0,a.bF)(N.B,null,{default:(0,a.k6)((function(){return[(0,a.eW)((0,i.v_)(u.cores),1)]})),_:1})]})),_:1}),(0,a.bF)(M.L,{dense:""},{default:(0,a.k6)((function(){return[(0,a.bF)(N.B,{cols:"6"},{default:(0,a.k6)((function(){return[Y]})),_:1}),(0,a.eW)(),(0,a.bF)(N.B,null,{default:(0,a.k6)((function(){return[(0,a.eW)((0,i.v_)(u.fwver),1)]})),_:1})]})),_:1}),(0,a.bF)(M.L,{dense:""},{default:(0,a.k6)((function(){return[(0,a.bF)(N.B,{cols:"6"},{default:(0,a.k6)((function(){return[Z]})),_:1}),(0,a.eW)(),(0,a.bF)(N.B,null,{default:(0,a.k6)((function(){return[(0,a.eW)((0,i.v_)(u.hostname),1)]})),_:1})]})),_:1}),(0,a.bF)(M.L,{dense:""},{default:(0,a.k6)((function(){return[(0,a.bF)(N.B,{cols:"6"},{default:(0,a.k6)((function(){return[ee]})),_:1}),(0,a.eW)(),(0,a.bF)(N.B,null,{default:(0,a.k6)((function(){return[(0,a.eW)((0,i.v_)(u.ap_ssid),1)]})),_:1})]})),_:1}),(0,a.bF)(M.L,{dense:""},{default:(0,a.k6)((function(){return[(0,a.bF)(N.B,{cols:"6"},{default:(0,a.k6)((function(){return[te]})),_:1}),(0,a.eW)(),(0,a.bF)(N.B,null,{default:(0,a.k6)((function(){return[(0,a.eW)((0,i.v_)(u.ap_ip),1)]})),_:1})]})),_:1}),(0,a.bF)(M.L,{dense:""},{default:(0,a.k6)((function(){return[(0,a.bF)(N.B,{cols:"6"},{default:(0,a.k6)((function(){return[ne]})),_:1}),(0,a.eW)(),(0,a.bF)(N.B,null,{default:(0,a.k6)((function(){return[(0,a.eW)((0,i.v_)(u.sta_ssid),1)]})),_:1})]})),_:1}),(0,a.bF)(M.L,{dense:""},{default:(0,a.k6)((function(){return[(0,a.bF)(N.B,{cols:"6"},{default:(0,a.k6)((function(){return[le]})),_:1}),(0,a.eW)(),(0,a.bF)(N.B,null,{default:(0,a.k6)((function(){return[(0,a.eW)((0,i.v_)(u.sta_ip),1)]})),_:1})]})),_:1})])]})),_:1})]})),_:1})]})),_:1})]})),_:1})]})),_:1})}]]),ue=n(64980),re=n(62082),se=n(11332),ce=n(90081),de=n(74053),fe=n(90123),me=n(41577),ge=n(88367),pe=n(53975),he=n(14411),ke={key:0},be={key:0},ve={key:0},Fe={key:0},_e={key:0},ye=["href"],we={key:1},Ce=["onClick"],Ae={key:0},Le={key:0},xe={key:1},Ve={key:2},Te={key:3},We={key:0},Ue={key:0};n(2008),n(25276),n(62062),n(44114),n(26099),n(58940),n(27495),n(71761),n(25440),n(23500),n(3362);var Ee={name:"files",data:function(){return{files:[],currentFile:void 0,progress:0,loadTable:!0,itemsPerPage:-1,selected:[],bulkselectfields:{value:0,items:[{title:"Action",value:0,hidden:!0},{title:"Delete",value:1},{title:"Archive",value:2}]},items:[],title:"",headers:[{title:"Name",align:"start",key:"name"},{title:"Size",align:"end",key:"size"},{title:"Date",align:"end",key:"date"},{title:"Type",align:"end",key:"type"},{title:"Actions",align:"end",key:"actions",sortable:!1}],sortBy:[{key:"date",order:"desc"}],snackbar:!1,snackbarText:"",snackbarTimeout:1e3,dialog:!1,dialogText:"",functionResolve:null}},methods:{isSelected:function(e){return this.selected.includes(e.name)},toggleSelect:function(e){this.selected.includes(e.name)?this.selected=this.selected.filter((function(t){return t!==e.name})):this.selected.push(e.name)},bulkAction:function(){var e=this;if(1==this.bulkselectfields.value){var t="";this.selected.forEach((function(n){for(var l=0;l<e.items.length;l++)if(e.items[l].name==n&&"d"!=e.items[l].type){t.length&&(t+="|"),t+=n;break}})),console.log("delete:"+t),t.length>0&&this.deleteFile(t)}else 2==this.bulkselectfields.value&&(t="",this.selected.forEach((function(n){for(var l=0;l<e.items.length;l++)if(e.items[l].name==n&&"d"!=e.items[l].type){t.length&&(t+="|"),t+=n;break}})),console.log("archive:"+t),t.length>0&&this.archiveFile(t));this.selected=[],this.bulkselectfields.value=0},upload:function(e){var t=new FormData;return t.append("fwfile",this.currentFile),w.post(this.$route.fullPath,t,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:function(e){this.progress=parseInt(Math.round(e.loaded/e.total*100))}.bind(this)})},selectFile:function(e){this.progress=0,this.currentFile=e.target.files[0]},uploadFiles:function(){var e=this;this.currentFile?(this.progress=0,this.upload(this.currentFile).then((function(t){e.refreshList(t.data.msg),console.log(t.data)})).catch((function(t){e.progress=0,console.log(t),e.errorMsg("Could not upload!"),e.currentFile=void 0}))):this.errorMsg("Please select a file!")},dialogResult:function(e){this.dialog=!1,this.functionResolve(e)},createPromise:function(){var e=this;return new Promise((function(t){e.functionResolve=t}))},getLink:function(e){return w.defaults.baseURL.replace(/\/api.*/,this.$route.fullPath+"/")+e},getAll:function(){this.$route.params.id;var e=this.$route.fullPath;return w.get(e)},delete:function(e){if(console.log(e),e&&e.indexOf("|")>0){var t={name:e};return w.post(this.$route.fullPath+"/delete",t)}return w.get(this.$route.fullPath+"/".concat(e,"/delete"))},go:function(e){return console.log(this.$route.fullPath+"/"+e),this.$router.push(this.$route.fullPath+"/"+e)},downloadFile:function(e){return w.get(this.$route.fullPath+"/".concat(e))},archive:function(e){return w.get(this.$route.fullPath+"/".concat(e,"/archive"))},retrieveFiles:function(){var e=this;console.log(this.$route.fullPath),this.getAll().then((function(t){var n=t.data;n&&n.data&&"object"==(0,ae.A)(n.data)&&(n=n.data),e.items=n.map(e.getDisplayFile).filter(e.filterDisplayFile),e.loadTable=!1})).catch((function(e){console.log(e)}))},refreshList:function(e){this.snackbar=!0,this.snackbarText=e,this.retrieveFiles()},errorMsg:function(e){this.snackbar=!0,this.snackbarText=e,console.log(e)},deleteFile:function(e){var t=this;this.dialogText="Delete "+e+"?",this.dialog=!0,this.createPromise().then((function(n){t.dialog=!1,t.dialogText="",1==n&&t.delete(e).then((function(){t.refreshList(e+" deleted.")})).catch((function(n){t.errorMsg(e+" delete failed.")}))}))},archiveFile:function(e){var t=this;this.archive(e).then((function(){t.refreshList(e+" archieved.")})).catch((function(n){t.errorMsg(e+" archieve failed.")}))},getDisplayFile:function(e){return{name:e.name,size:e.size,date:e.date,type:e.type,actions:null}},filterDisplayFile:function(e){return e&&e.name&&!e.name.match(/^(\..|config_)/)}},mounted:function(){},created:function(){var e=this;window.location.origin.includes("esp-logger")&&(w.defaults.baseURL=window.location.origin+"/api/v1"),this.$watch((function(){return e.$route.params}),(function(){e.retrieveFiles()}),{immediate:!0}),this.retrieveFiles()}},Pe=n(82820),Be=n.n(Pe),De={};De.styleTagTransform=X(),De.setAttributes=E(),De.insert=W().bind(null,"head"),De.domAPI=V(),De.insertStyleElement=B(),L()(Be(),De),Be()&&Be().locals&&Be().locals;var Xe=(0,$.A)(Ee,[["render",function(e,t,n,o,u,r){return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.bF)(J.I,null,{default:(0,a.k6)((function(){return[(0,a.bF)(M.L,{align:"center",class:"list px-3 mx-auto"},{default:(0,a.k6)((function(){return[(0,a.bF)(N.B,null,{default:(0,a.k6)((function(){return[(0,a.bF)(j.J,{class:"mx-auto",tile:""},{default:(0,a.k6)((function(){return[(0,a.bF)(de.Py,{headers:u.headers,items:u.items,"item-value":"name","items-per-page":u.itemsPerPage,"sort-by":u.sortBy,"onUpdate:sortBy":t[3]||(t[3]=function(e){return u.sortBy=e}),class:"elevation-1",loading:u.loadTable,"loading-text":"Loading files from device ...","disable-pagination":!0,"hide-default-footer":!0,"hide-default-header":!1,modelValue:u.selected,"onUpdate:modelValue":t[4]||(t[4]=function(e){return u.selected=e}),"fixed-header":"",height:"85vh"},(0,ue.A)((0,ue.A)((0,ue.A)((0,ue.A)({top:(0,a.k6)((function(){return[(0,a.bF)(he.u,{flat:""},{default:(0,a.k6)((function(){return[(0,a.bF)(b.s,null,{default:(0,a.k6)((function(){return[(0,a.eW)("Files")]})),_:1}),(0,a.bF)(c.h),(0,a.bF)(N.B,{class:"mx-auto",cols:"3",sm:"3"},{default:(0,a.k6)((function(){return[u.selected.length?((0,a.uX)(),(0,a.CE)("span",ke,[(0,a.bF)(ge.d4,{modelValue:u.bulkselectfields.value,"onUpdate:modelValue":[t[0]||(t[0]=function(e){return u.bulkselectfields.value=e}),t[1]||(t[1]=function(e){return r.bulkAction()})],items:u.bulkselectfields.items,"hide-details":"",density:"compact"},null,8,["modelValue","items"])])):(0,a.Q3)("v-if",!0)]})),_:1}),(0,a.bF)(N.B,{class:"mx-auto",cols:"5",sm:"5"},{default:(0,a.k6)((function(){return[(0,a.bF)(me.f,{id:"file",modelValue:u.files,"onUpdate:modelValue":t[2]||(t[2]=function(e){return u.files=e}),color:"deep-purple-accent-4","show-size":"",label:"Upload file",onChange:r.selectFile,"hide-details":"","single-line":""},null,8,["modelValue","onChange"])]})),_:1}),u.files.length?((0,a.uX)(),(0,a.CE)("span",be,[(0,a.bF)(N.B,{class:"mx-auto"},{default:(0,a.k6)((function(){return[(0,a.bF)(s.D,{small:"",onClick:r.uploadFiles,icon:"$upload"},{default:(0,a.k6)((function(){return[(0,a.bF)(d.w,{right:""},{default:(0,a.k6)((function(){return[(0,a.eW)("$upload")]})),_:1})]})),_:1},8,["onClick"])]})),_:1})])):(0,a.Q3)("v-if",!0)]})),_:1})]}))},"item.name",(0,a.k6)((function(e){var t=e.item;return[(0,a.Lk)("td",null,["d"!=t.type&&"config.txt"!=t.name?((0,a.uX)(),(0,a.CE)("span",ve,[(0,a.bF)(ce.M,{"model-value":r.isSelected(t),color:"primary","onUpdate:modelValue":function(e){return r.toggleSelect(t)}},null,8,["model-value","onUpdate:modelValue"])])):(0,a.Q3)("v-if",!0)]),(0,a.Lk)("td",null,[t?((0,a.uX)(),(0,a.CE)("span",Fe,["d"!=t.type?((0,a.uX)(),(0,a.CE)("span",_e,[(0,a.Lk)("a",{href:r.getLink(t.name)},(0,i.v_)(t.name),9,ye)])):((0,a.uX)(),(0,a.CE)("span",we,[(0,a.Lk)("span",{onClick:function(e){return r.go(t.name)}},(0,i.v_)(t.name),9,Ce)]))])):(0,a.Q3)("v-if",!0)])]}))),"item.size",(0,a.k6)((function(e){var t=e.item;return[t?((0,a.uX)(),(0,a.CE)("span",Ae,[t.size||"d"==t.type?(0,a.Q3)("v-if",!0):((0,a.uX)(),(0,a.CE)("span",Le," - ")),t.size&&t.size>1048576?((0,a.uX)(),(0,a.CE)("span",xe,(0,i.v_)(t.size/1024/1024|0)+" MB ",1)):t.size&&t.size>1024?((0,a.uX)(),(0,a.CE)("span",Ve,(0,i.v_)(t.size/1024|0)+" KB ",1)):((0,a.uX)(),(0,a.CE)("span",Te,(0,i.v_)(t.size),1))])):(0,a.Q3)("v-if",!0)]}))),"item.actions",(0,a.k6)((function(e){var t=e.item;return[t?((0,a.uX)(),(0,a.CE)("span",We,["d"!=t.type&&"config.txt"!=t.name?((0,a.uX)(),(0,a.CE)("span",Ue,[(0,a.bF)(d.w,{small:"",onClick:function(e){return r.deleteFile(t.name)},icon:"$delete",style:{"margin-right":"0.5em"}},null,8,["onClick"]),(0,a.bF)(d.w,{small:"",onClick:function(e){return r.archiveFile(t.name)},icon:"$archive"},null,8,["onClick"])])):(0,a.Q3)("v-if",!0)])):(0,a.Q3)("v-if",!0)]}))),"_",2),1032,["headers","items","items-per-page","sort-by","loading","modelValue"])]})),_:1})]})),_:1})]})),_:1})]})),_:1}),(0,a.bF)(pe.K,{modelValue:u.snackbar,"onUpdate:modelValue":t[6]||(t[6]=function(e){return u.snackbar=e}),timeout:u.snackbarTimeout},{actions:(0,a.k6)((function(){return[(0,a.bF)(s.D,{color:"blue",variant:"text",onClick:t[5]||(t[5]=function(e){return u.snackbar=!1})},{default:(0,a.k6)((function(){return[(0,a.eW)(" Close ")]})),_:1})]})),default:(0,a.k6)((function(){return[(0,a.eW)((0,i.v_)(u.snackbarText)+" ",1)]})),_:1},8,["modelValue","timeout"]),(0,a.bF)(fe.p,{modelValue:u.dialog,"onUpdate:modelValue":t[9]||(t[9]=function(e){return u.dialog=e}),width:"auto",ref:"dlg",onKeyup:[t[10]||(t[10]=(0,l.jR)((function(e){return r.dialogResult(!1)}),["esc"])),t[11]||(t[11]=(0,l.jR)((function(e){return r.dialogResult(!0)}),["enter"]))]},{default:(0,a.k6)((function(){return[(0,a.bF)(j.J,null,{default:(0,a.k6)((function(){return[(0,a.bF)(re.O,null,{default:(0,a.k6)((function(){return[(0,a.Lk)("div",null,(0,i.v_)(u.dialogText),1)]})),_:1}),(0,a.bF)(se.S,null,{default:(0,a.k6)((function(){return[(0,a.bF)(s.D,{color:"primary",variant:"text",onClick:t[7]||(t[7]=function(e){return r.dialogResult(!0)})},{default:(0,a.k6)((function(){return[(0,a.eW)("Ok")]})),_:1}),(0,a.bF)(s.D,{color:"primary",variant:"text",onClick:t[8]||(t[8]=function(e){return r.dialogResult(!1)})},{default:(0,a.k6)((function(){return[(0,a.eW)("Cancel")]})),_:1})]})),_:1})]})),_:1})]})),_:1},8,["modelValue"])],64)}]]),Re=(n(62953),n(23792),n(18433)),Se=n(64911),Ie=n(43091),$e=["innerHTML"],ze={key:0},Ke={key:1},je={key:2},Qe={key:0},Je={key:1};n(840);var Me={name:"config",data:function(){return{selected:[],loadTable:!0,conf:!1,confColor:"",confText:"",items:[],title:"",itemsPerPage:-1,headers:[{title:"Name",align:"start",key:"name",width:"18%"},{title:"Value",align:"end",key:"value",width:"40%",sortable:!1},{title:"Description",align:"end",key:"desc",width:"40%",sortable:!1}],snackbar:!1,snackbarText:"",snackbarTimeout:1e3}},methods:{onlynumeric:function(e){return"number"==typeof e&&!isNaN(e)||"Only numeric allowed!"},save:function(){return!1},cancel:function(){return!1},open:function(){this.conf=!0,this.confColor="info",this.confText="Dialog opened"},close:function(){console.log("Dialog closed")},getAll:function(){return w.get("/config")},update:function(e){null!=e.selected&&(e.val=e.selected.value);var t={name:e.name,value:"bool"==e.type?e.value?1:0:"int"==e.type||"float"==e.type?isNaN(e.value)?0:parseFloat(e.value):e.value};return w.post("/config/".concat(t.name),t)},retrieveConfig:function(){var e=this;this.getAll().then((function(t){var n=t.data;n&&n.data&&"object"==(0,ae.A)(n.data)&&(n=n.data),e.items=n.map(e.getDisplayConf),e.loadTable=!1})).catch((function(e){console.log(e)}))},refreshList:function(){this.retrieveConfig()},updateToggle:function(e){if(console.log(e),e.tvalue){var t=0;e.toggles.forEach((function(n,l){e.tvalue.includes(l)?t|=1<<l:t&=~(1<<l)})),e.value!=t&&(e.value=t,this.updateConf(e))}},updateConf:function(e,t){var n=this;console.log(e),console.log(t),this.update(e,t).then((function(){n.snackbar=!0,n.snackbarText=e.name+" updated.",n.refreshList()})).catch((function(t){n.refreshList(),n.snackbar=!0,n.snackbarText=e.name+" update failed.",console.log(t)}))},getDisplayConf:function(e){var t=[];return e.toggles&&(t=e.toggles.map((function(t,n){if(e.value&t.value)return n}))),{name:e.name,value:e.type&&"bool"==e.type?1==e.value:e.value,desc:e.info,type:e.type,values:e.values?e.values:null,toggles:e.toggles?e.toggles:null,selected:e.values?{name:e.name,value:e.value,type:e.type}:null,tvalue:t}}},watch:{items:{handler:function(e,t){if(t.length&&e.length)for(var n,l,a=0,i=e.length;a<i;++a)if(n=e[a],l=t[a],n.name==l.name&&n.value!==l.value){console.log(n.name+" --\x3e "+l.name);break}},deep:!0}},mounted:function(){window.location.origin.includes("esp-logger")&&(w.defaults.baseURL=window.location.origin+"/api/v1"),this.retrieveConfig()}},Ne=n(22759),He=n.n(Ne),Oe={};Oe.styleTagTransform=X(),Oe.setAttributes=E(),Oe.insert=W().bind(null,"head"),Oe.domAPI=V(),Oe.insertStyleElement=B(),L()(He(),Oe),He()&&He().locals&&He().locals;var Ge=(0,$.A)(Me,[["render",function(e,t,n,o,u,r){return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.bF)(J.I,null,{default:(0,a.k6)((function(){return[(0,a.bF)(M.L,{align:"center",class:"list px-3 mx-auto"},{default:(0,a.k6)((function(){return[(0,a.bF)(N.B,null,{default:(0,a.k6)((function(){return[(0,a.bF)(j.J,{class:"mx-auto",tile:""},{default:(0,a.k6)((function(){return[(0,a.bF)(Q.r,null,{default:(0,a.k6)((function(){return[(0,a.eW)("Logger Configuration")]})),_:1}),(0,a.bF)(de.Py,{headers:u.headers,items:u.items,"item-key":"name","items-per-page":u.itemsPerPage,"disable-pagination":!0,"hide-default-footer":!0,"hide-default-header":!0,loading:u.loadTable,"loading-text":"Loading data from device ...","fixed-header":"",height:"85vh"},(0,ue.A)((0,ue.A)((0,ue.A)({},"item.desc",(0,a.k6)((function(e){var t=e.item;return[(0,a.Lk)("div",{innerHTML:t.desc},null,8,$e)]}))),"item.value",(0,a.k6)((function(e){var t=e.item;return[t&&t.toggles?((0,a.uX)(),(0,a.CE)("span",ze,[(0,a.bF)(Re.H_,{style:{display:"table-cell"},modelValue:t.tvalue,"onUpdate:modelValue":function(e){return t.tvalue=e},onChange:function(e){return r.updateConf(t)},multiple:""},{default:(0,a.k6)((function(){return[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(t.toggles,(function(e,n){return(0,a.uX)(),(0,a.Wv)(s.D,{key:n,value:n,onClick:function(e){return r.updateToggle(t,n)}},{default:(0,a.k6)((function(){return[(0,a.eW)((0,i.v_)(e.title),1)]})),_:2},1032,["value","onClick"])})),128))]})),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])])):t&&t.values?((0,a.uX)(),(0,a.CE)("span",Ke,[(0,a.bF)(ge.d4,{modelValue:t.value,"onUpdate:modelValue":[function(e){return t.value=e},function(e){return r.updateConf(t)}],label:"Select",items:t.values,"hide-details":"","single-line":"",suffix:t.ext,variant:"outlined"},null,8,["modelValue","onUpdate:modelValue","items","suffix"])])):((0,a.uX)(),(0,a.CE)("span",je,["bool"!=t.type?((0,a.uX)(),(0,a.CE)("span",Qe,[(0,a.bF)(Ie.W,{modelValue:t.value,"onUpdate:modelValue":function(e){return t.value=e},label:"Edit","single-line":"",suffix:t.ext,variant:"outlined","hide-details":"",onKeydown:(0,l.jR)((function(e){return r.updateConf(t)}),["enter"])},null,8,["modelValue","onUpdate:modelValue","suffix","onKeydown"])])):((0,a.uX)(),(0,a.CE)("span",Je,[(0,a.bF)(Se.N,{modelValue:t.value,"onUpdate:modelValue":function(e){return t.value=e},color:"primary","hide-details":"",onChange:function(e){return r.updateConf(t)}},null,8,["modelValue","onUpdate:modelValue","onChange"])]))]))]}))),"_",2),1032,["headers","items","items-per-page","loading"])]})),_:1})]})),_:1})]})),_:1})]})),_:1}),(0,a.bF)(pe.K,{modelValue:u.snackbar,"onUpdate:modelValue":t[1]||(t[1]=function(e){return u.snackbar=e}),timeout:u.snackbarTimeout},{actions:(0,a.k6)((function(){return[(0,a.bF)(s.D,{color:"blue",variant:"text",onClick:t[0]||(t[0]=function(e){return u.snackbar=!1})},{default:(0,a.k6)((function(){return[(0,a.eW)(" Close ")]})),_:1})]})),default:(0,a.k6)((function(){return[(0,a.eW)((0,i.v_)(u.snackbarText)+" ",1)]})),_:1},8,["modelValue","timeout"])],64)}]]),qe=n(4017),Ye=n(89080),Ze=n(35415),et={class:"grey--text"},tt={name:"firmwareUpdate",data:function(){return{currentFile:void 0,progress:0,message:"",firmwareversion:"",files:[],snackbar:!1,snackbarText:"",snackbarTimeout:1e3}},methods:{upload:function(e){var t=new FormData;return t.append("fwfile",this.currentFile),w.post("/fw/update",t,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:function(e){this.progress=parseInt(Math.round(e.loaded/e.total*100))}.bind(this)})},getFirmwareVersion:function(){var e=this;console.log(this.$route.fullPath),w.get("/fw/version").then((function(t){var n=t.data;n&&n.data&&"object"==(0,ae.A)(n.data)&&(n=n.data),e.firmwareversion=n.version,console.log(e.firmwareversion)})).catch((function(e){console.log(e)}))},selectFile:function(e){this.progress=0,this.currentFile=e.target.files[0]},refresh:function(e){this.snackbar=!0,this.snackbarText=e,this.getFirmwareVersion()},uploadFiles:function(){var e=this;this.currentFile?(this.progress=0,this.upload(this.currentFile).then((function(t){e.message=t.data.msg,e.refresh(t.data.msg)})).catch((function(){e.progress=0,e.message="Could not upload the file!",e.currentFile=void 0}))):this.message="Please select a file!"}},mounted:function(){window.location.origin.includes("esp-logger")&&(w.defaults.baseURL=window.location.origin+"/api/v1"),this.getFirmwareVersion()}},nt=n(4339),lt=n.n(nt),at={};at.styleTagTransform=X(),at.setAttributes=E(),at.insert=W().bind(null,"head"),at.domAPI=V(),at.insertStyleElement=B(),L()(lt(),at),lt()&&lt().locals&&lt().locals;var it=(0,$.A)(tt,[["render",function(e,t,n,l,o,u){return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.bF)(J.I,null,{default:(0,a.k6)((function(){return[(0,a.bF)(j.J,{class:"mx-auto",tile:""},{default:(0,a.k6)((function(){return[(0,a.bF)(Q.r,{class:"mt-4 text-h6"},{default:(0,a.k6)((function(){return[(0,a.eW)("Firmware update")]})),_:1}),o.currentFile?((0,a.uX)(),(0,a.Wv)(M.L,{key:0,"no-gutters":"",justify:"center",align:"center"},{default:(0,a.k6)((function(){return[(0,a.bF)(N.B,{class:"col-md-6"},{default:(0,a.k6)((function(){return[(0,a.bF)(Ze.Z,{modelValue:o.progress,"onUpdate:modelValue":t[0]||(t[0]=function(e){return o.progress=e}),color:"primary",height:"20",reactive:""},{default:(0,a.k6)((function(){return[(0,a.Lk)("strong",null,(0,i.v_)(o.progress)+" %",1)]})),_:1},8,["modelValue"])]})),_:1})]})),_:1})):(0,a.Q3)("v-if",!0),(0,a.bF)(M.L,null,{default:(0,a.k6)((function(){return[(0,a.bF)(N.B,{class:"col-6"},{default:(0,a.k6)((function(){return[(0,a.bF)(me.f,{id:"file",modelValue:o.files,"onUpdate:modelValue":t[1]||(t[1]=function(e){return o.files=e}),color:"deep-purple-accent-4","show-size":"",label:"Firmware file",onChange:u.selectFile,"hide-details":"",class:"pa-0 ma-0","single-line":"",variant:"outlined"},null,8,["modelValue","onChange"])]})),_:1})]})),_:1}),(0,a.bF)(M.L,null,{default:(0,a.k6)((function(){return[(0,a.bF)(N.B,{cols:"6",offset:"5",class:"padding-5"},{default:(0,a.k6)((function(){return[(0,a.bF)(s.D,{small:"",onClick:u.uploadFiles},{default:(0,a.k6)((function(){return[(0,a.eW)(" Upload "),(0,a.bF)(d.w,{right:""},{default:(0,a.k6)((function(){return[(0,a.eW)("$upload")]})),_:1})]})),_:1},8,["onClick"])]})),_:1})]})),_:1}),o.message?((0,a.uX)(),(0,a.Wv)(qe.l,{key:1,border:"left"},{default:(0,a.k6)((function(){return[(0,a.eW)((0,i.v_)(o.message),1)]})),_:1})):(0,a.Q3)("v-if",!0),(0,a.bF)(M.L,null,{default:(0,a.k6)((function(){return[(0,a.bF)(m.x8,null,{default:(0,a.k6)((function(){return[(0,a.bF)(Ye.w,{class:"ma-auto"},{default:(0,a.k6)((function(){return[(0,a.Lk)("span",et,"Current Firmware version: "+(0,i.v_)(o.firmwareversion),1)]})),_:1})]})),_:1})]})),_:1})]})),_:1})]})),_:1}),(0,a.bF)(pe.K,{modelValue:o.snackbar,"onUpdate:modelValue":t[3]||(t[3]=function(e){return o.snackbar=e}),timeout:o.snackbarTimeout},{actions:(0,a.k6)((function(){return[(0,a.bF)(s.D,{color:"blue",variant:"text",onClick:t[2]||(t[2]=function(e){return o.snackbar=!1})},{default:(0,a.k6)((function(){return[(0,a.eW)(" Close ")]})),_:1})]})),default:(0,a.k6)((function(){return[(0,a.eW)((0,i.v_)(o.snackbarText)+" ",1)]})),_:1},8,["modelValue","timeout"])],64)}]]),ot=n(57027),ut={data:function(){return{username:"",password:"",token:""}},mounted:function(){window.location.origin.includes("esp-logger")&&(w.defaults.baseURL=window.location.origin+"/api/v1")},methods:(0,_.A)((0,_.A)({},(0,y.PY)(["setUser","setToken"])),{},{login:function(e){var t=this;w.get("/login",{username:this.username,password:this.password},{headers:{"Content-Type":"application/json"}}).then((function(e){var n=e.data;n&&n.data&&"object"==(0,ae.A)(n.data)&&(n=n.data),n.username&&n.token?(t.setUser(n.user),t.setToken(n.token),t.$router.push("/")):console.log(n)})).catch((function(e){console.log(e)}))}})},rt=n(75283),st=n.n(rt),ct={};ct.styleTagTransform=X(),ct.setAttributes=E(),ct.insert=W().bind(null,"head"),ct.domAPI=V(),ct.insertStyleElement=B(),L()(st(),ct),st()&&st().locals&&st().locals;var dt=[{path:"/",name:"Home",component:oe},{path:"/files/:id*",component:Xe},{path:"/config",name:"Config",component:Ge},{path:"/fwupdate",name:"Firmware",component:it},{path:"/login",name:"Login",component:(0,$.A)(ut,[["render",function(e,t,l,i,o,u){return(0,a.uX)(),(0,a.Wv)(J.I,null,{default:(0,a.k6)((function(){return[(0,a.bF)(M.L,{align:"center",justify:"center",style:{height:"100vh"},dense:""},{default:(0,a.k6)((function(){return[(0,a.bF)(N.B,{cols:"12",sm:"6","offset-sm":"3",class:"grey lighten-2 fill-height d-flex flex-column justify-center align-center"},{default:(0,a.k6)((function(){return[(0,a.bF)(j.J,{class:"mx-auto mt-12","max-width":"500"},{default:(0,a.k6)((function(){return[(0,a.bF)(H.y,{src:n(69290),contain:"",height:"100"},null,8,["src"]),(0,a.bF)(re.O,null,{default:(0,a.k6)((function(){return[(0,a.bF)(ot.n,null,{default:(0,a.k6)((function(){return[(0,a.bF)(Ie.W,{modelValue:e.username,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.username=t}),label:"Username",rules:[function(e){return!!e||"Username is required"}],required:"","single-line":"",variant:"outlined"},null,8,["modelValue","rules"]),(0,a.bF)(Ie.W,{modelValue:e.password,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.password=t}),label:"Password",rules:[function(e){return!!e||"Password is required"}],type:"password",required:"","single-line":"",variant:"outlined"},null,8,["modelValue","rules"])]})),_:1})]})),_:1}),(0,a.bF)(se.S,null,{default:(0,a.k6)((function(){return[(0,a.bF)(s.D,{block:"",size:"large",variant:"outlined",color:"primary",onClick:t[2]||(t[2]=function(e){return u.login()})},{default:(0,a.k6)((function(){return[(0,a.eW)(" Login ")]})),_:1})]})),_:1})]})),_:1})]})),_:1})]})),_:1})]})),_:1})}]])}],ft=(0,K.aE)({history:(0,K.LA)(""),routes:dt}),mt=new y.Ay.Store({state:{user:null,token:null},mutations:{setUser:function(e,t){e.user=t},setToken:function(e,t){e.token=t}},actions:{},getters:{isLoggedIn:function(e){return!!e.token}}}),gt=(n(29564),n(34825)),pt=n(82974),ht=n(91130),kt=n(51171),bt=n(9165),vt=(0,gt.$N)({theme:{defaultTheme:"light"},VBtn:{rounded:!1},components:(0,_.A)({},pt),directives:ht,icons:{defaultSet:"mdi",aliases:(0,_.A)((0,_.A)({},kt.z),{},{delete:bt.y_G,download:bt.XCd,archive:bt.nSK,home:bt.KiL,login:bt.G_5,upload:bt.wKA}),sets:{mdi:kt.r}},defaultAssets:{}}),Ft=(0,l.Ef)(z);Ft.use(vt),Ft.use(ft),Ft.use(mt),Ft.mount("#app")},69290:function(e,t,n){e.exports=n.p+"assets/img/esp-gps-logo-v220041c9e.png"},80683:function(){},22759:function(){},82820:function(){},4339:function(){},75283:function(){},12545:function(e){"use strict";e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAYAAADED76LAAAAAXNSR0IArs4c6QAAACRJREFUKFNjPHTo0H8GJGBnZ8eIzGekgwJk+0BsdCtRHEQbBQBbbh0dIGKknQAAAABJRU5ErkJggg=="}},function(e){e.O(0,[96],(function(){return e(e.s=32511)})),e.O()}]);